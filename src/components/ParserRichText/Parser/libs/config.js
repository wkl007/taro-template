"use strict";function makeMap(t){var a=Object.create(null),r=t.split(","),s=!0,e=!1,l=void 0;try{for(var i,o=r[Symbol.iterator]();!(s=(i=o.next()).done);s=!0){a[i.value]=!0}}catch(t){e=!0,l=t}finally{try{!s&&o.return&&o.return()}finally{if(e)throw l}}return a}function versionHigherThan(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=SDKVersion.split("."),r=t.split(".");a.length!=r.length;)a.length<r.length?a.push("0"):r.push("0");for(var s=0;s<a.length;s++)if(a[s]!=r[s])return parseInt(a[s])>parseInt(r[s]);return!0}function bubbling(t){for(var a=t._STACK.length-1;a>=0;a--){if(richOnlyTags[t._STACK[a].name])return!1;t._STACK[a].c=1}return!0}var trustAttrs=makeMap("align,alt,app-id,appId,author,autoplay,border,cellpadding,cellspacing,class,color,colspan,controls,data-src,dir,face,height,href,id,ignore,loop,muted,name,path,poster,rowspan,size,span,src,start,style,type,unit-id,unitId,width,xmlns"),trustTags=makeMap("a,abbr,ad,audio,b,blockquote,br,code,col,colgroup,dd,del,dl,dt,div,em,fieldset,h1,h2,h3,h4,h5,h6,hr,i,img,ins,label,legend,li,ol,p,q,source,span,strong,sub,sup,table,tbody,td,tfoot,th,thead,tr,title,u,ul,video"),blockTags=makeMap("address,article,aside,body,center,cite,footer,header,html,nav,pre,section"),ignoreTags=makeMap("area,base,basefont,canvas,circle,command,ellipse,embed,frame,head,iframe,input,isindex,keygen,line,link,map,meta,param,path,polygon,rect,script,source,svg,textarea,track,use,wbr"),richOnlyTags=makeMap("a,ad,audio,colgroup,fieldset,legend,li,ol,sub,sup,table,tbody,td,tfoot,th,thead,tr,ul,video"),selfClosingTags=makeMap("area,base,basefont,br,col,circle,ellipse,embed,frame,hr,img,input,isindex,keygen,line,link,meta,param,path,polygon,rect,source,track,use,wbr"),userAgentStyles={a:"color:#366092;word-break:break-all;padding:1.5px 0 1.5px 0",address:"font-style:italic",blockquote:"background-color:#f6f6f6;border-left:3px solid #dbdbdb;color:#6c6c6c;padding:5px 0 5px 10px",center:"text-align:center",cite:"font-style:italic",code:"padding:0 1px 0 1px;margin-left:2px;margin-right:2px;background-color:#f8f8f8;border-radius:3px",dd:"margin-left:40px",img:"max-width:100%",mark:"background-color:yellow",pre:"font-family:monospace;white-space:pre;overflow:scroll",s:"text-decoration:line-through",u:"text-decoration:underline"},SDKVersion=wx.getSystemInfoSync().SDKVersion;versionHigherThan("2.7.1")?(trustTags.bdi=!0,trustTags.bdo=!0,trustTags.caption=!0,trustTags.rt=!0,trustTags.ruby=!0,ignoreTags.rp=!0,trustTags.big=!0,trustTags.small=!0,trustTags.pre=!0,richOnlyTags.bdi=!0,richOnlyTags.bdo=!0,richOnlyTags.caption=!0,richOnlyTags.rt=!0,richOnlyTags.ruby=!0,richOnlyTags.pre=!0,blockTags.pre=void 0):(blockTags.caption=!0,userAgentStyles.big="display:inline;font-size:1.2em",userAgentStyles.small="display:inline;font-size:0.8em"),module.exports={highlight:null,LabelAttrsHandler:function(t,a){switch(t.attrs.style=a.CssHandler.match(t.name,t.attrs,t)+(t.attrs.style||""),t.name){case"div":case"p":t.attrs.align&&(t.attrs.style="text-align:"+t.attrs.align+";"+t.attrs.style,t.attrs.align=void 0);break;case"img":t.attrs["data-src"]&&(t.attrs.src=t.attrs.src||t.attrs["data-src"],t.attrs["data-src"]=void 0),t.attrs.src&&(t.attrs.ignore||(bubbling(a)?t.attrs.i=(a._imgNum++).toString():t.attrs.ignore="true"),a._domain&&"/"==t.attrs.src[0]&&("/"==t.attrs.src[1]?t.attrs.src=a._protocol+":"+t.attrs.src:t.attrs.src=a._domain+t.attrs.src));break;case"a":case"ad":bubbling(a);break;case"font":if(t.attrs.color&&(t.attrs.style="color:"+t.attrs.color+";"+t.attrs.style,t.attrs.color=void 0),t.attrs.face&&(t.attrs.style="font-family:"+t.attrs.face+";"+t.attrs.style,t.attrs.face=void 0),t.attrs.size){var r=parseInt(t.attrs.size);r<1?r=1:r>7&&(r=7);var s=["xx-small","x-small","small","medium","large","x-large","xx-large"];t.attrs.style="font-size:"+s[r-1]+";"+t.attrs.style,t.attrs.size=void 0}break;case"video":case"audio":t.attrs.id?a["_"+t.name+"Num"]++:t.attrs.id=t.name+ ++a["_"+t.name+"Num"],"video"==t.name&&(t.attrs.width&&(t.attrs.style="width:"+parseFloat(t.attrs.width)+(t.attrs.width.includes("%")?"%":"px")+";"+t.attrs.style,t.attrs.width=void 0),t.attrs.height&&(t.attrs.style="height:"+parseFloat(t.attrs.height)+(t.attrs.height.includes("%")?"%":"px")+";"+t.attrs.style,t.attrs.height=void 0),a._videoNum>3&&(t.lazyLoad=!0)),t.attrs.source=[],t.attrs.src&&t.attrs.source.push(t.attrs.src),t.attrs.controls||t.attrs.autoplay||console.warn("存在没有 controls 属性的 "+t.name+" 标签，可能导致无法播放",t),bubbling(a);break;case"source":var e=a._STACK[a._STACK.length-1];!e||"video"!=e.name&&"audio"!=e.name||(e.attrs.source.push(t.attrs.src),e.attrs.src||(e.attrs.src=t.attrs.src))}a._domain&&t.attrs.style.includes("url")&&(t.attrs.style=t.attrs.style.replace(/url\s*\(['"\s]*(\S*?)['"\s]*\)/,function(){var t=arguments[1];return t&&"/"==t[0]?"/"==t[1]?"url("+a._protocol+":"+t+")":"url("+a._domain+t+")":arguments[0]})),t.attrs.style||(t.attrs.style=void 0),a._useAnchor&&t.attrs.id&&bubbling(a)},trustAttrs:trustAttrs,trustTags:trustTags,blockTags:blockTags,ignoreTags:ignoreTags,selfClosingTags:selfClosingTags,userAgentStyles:userAgentStyles,versionHigherThan:versionHigherThan};